# Lot Management System - Backend

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
pip install -r requirements.txt
```

### 2. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

`.env.example`ã‚’`.env`ã«ã‚³ãƒ”ãƒ¼ã—ã¦ã€å¿…è¦ã«å¿œã˜ã¦å€¤ã‚’å¤‰æ›´ã—ã¦ãã ã•ã„ã€‚

```bash
cp .env.example .env
```

### 3. ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ï¼ˆãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰æœ‰åŠ¹ï¼‰
uvicorn app.main:app --reload

# ã¾ãŸã¯
python -m app.main
```

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ http://localhost:8000 ã§èµ·å‹•ã—ã¾ã™ã€‚

### 4. API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- Swagger UI: http://localhost:8000/docs
- ReDoc: http://localhost:8000/redoc

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py              # FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ config.py        # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š
â”‚   â”‚   â””â”€â”€ database.py      # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶š
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ deps.py          # ä¾å­˜æ€§æ³¨å…¥
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ lots.py      # ãƒ­ãƒƒãƒˆç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”‚       â””â”€â”€ admin.py     # ç®¡ç†ç”¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ __init__.py      # SQLAlchemyãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ schemas/
â”‚       â””â”€â”€ __init__.py      # Pydanticã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ requirements.txt         # ä¾å­˜é–¢ä¿‚
â”œâ”€â”€ .env.example             # ç’°å¢ƒå¤‰æ•°ã‚µãƒ³ãƒ—ãƒ«
â””â”€â”€ README.md                # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ”Œ API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ãƒ­ãƒƒãƒˆç®¡ç†

#### ä¸€è¦§å–å¾—
```
GET /api/lots
Query Parameters:
  - skip: int (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0) - ã‚¹ã‚­ãƒƒãƒ—ã™ã‚‹ä»¶æ•°
  - limit: int (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 100) - å–å¾—ã™ã‚‹æœ€å¤§ä»¶æ•°
```

#### è©³ç´°å–å¾—
```
GET /api/lots/{lot_id}
```

#### ä½œæˆ
```
POST /api/lots
Request Body:
{
  "name": "ãƒ­ãƒƒãƒˆå",
  "quantity": 100.0,
  "status": "pending",
  "description": "èª¬æ˜ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰"
}
```

#### æ›´æ–°
```
PUT /api/lots/{lot_id}
Request Body:
{
  "name": "æ–°ã—ã„ãƒ­ãƒƒãƒˆå",
  "quantity": 150.0,
  "status": "in_progress"
}
```

#### å‰Šé™¤
```
DELETE /api/lots/{lot_id}
```

### ç®¡ç†æ©Ÿèƒ½

#### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```
GET /api/admin/health
Response:
{
  "status": "healthy",
  "environment": "development",
  "database": "sqlite"
}
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
```
POST /api/admin/reset-database
Response:
{
  "success": true,
  "message": "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒæ­£å¸¸ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã—ãŸ",
  "deleted_tables": ["lots"]
}
```

âš ï¸ **è­¦å‘Š**: ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯å…¨ã¦ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‰Šé™¤ã—ã¾ã™ã€‚æœ¬ç•ªç’°å¢ƒã§ã¯ç„¡åŠ¹åŒ–ã•ã‚Œã¾ã™ã€‚

## ğŸ¯ ä½¿ç”¨ä¾‹

### cURLã§ãƒ­ãƒƒãƒˆã‚’ä½œæˆ

```bash
curl -X POST "http://localhost:8000/api/lots" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "ã‚µãƒ³ãƒ—ãƒ«ãƒ­ãƒƒãƒˆ",
    "quantity": 100.0,
    "status": "pending",
    "description": "ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿"
  }'
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ

```bash
curl -X POST "http://localhost:8000/api/admin/reset-database"
```

## ğŸ”§ é–‹ç™ºTips

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª

SQLiteã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ `lot_management.db` ã¨ã—ã¦ä½œæˆã•ã‚Œã¾ã™ã€‚

```bash
# SQLiteã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ç¢ºèª
sqlite3 lot_management.db

# ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§
.tables

# lotsãƒ†ãƒ¼ãƒ–ãƒ«ã®å†…å®¹ç¢ºèª
SELECT * FROM lots;
```

### ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã®ç„¡åŠ¹åŒ–

æœ¬ç•ªç’°å¢ƒã§ã¯`--reload`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’å¤–ã—ã¦ãã ã•ã„ã€‚

```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000
```

## ğŸ“Š ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

ãƒ­ãƒƒãƒˆã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¯ä»¥ä¸‹ã®å€¤ã‚’å–ã‚Šã¾ã™ï¼š

- `pending`: ä¿ç•™ä¸­
- `in_progress`: å‡¦ç†ä¸­
- `completed`: å®Œäº†
- `cancelled`: ã‚­ãƒ£ãƒ³ã‚»ãƒ«

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚¨ãƒ©ãƒ¼

```bash
# Pythonãƒ‘ã‚¹ã®ç¢ºèª
export PYTHONPATH="${PYTHONPATH}:$(pwd)"

# ã¾ãŸã¯ä»®æƒ³ç’°å¢ƒã‚’ä½¿ç”¨
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼

ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦å†ä½œæˆã—ã¦ãã ã•ã„ã€‚

```bash
rm lot_management.db
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†èµ·å‹•ã™ã‚‹ã¨è‡ªå‹•çš„ã«å†ä½œæˆã•ã‚Œã¾ã™
```

## ğŸ“ ä»Šå¾Œã®æ‹¡å¼µ

- [ ] èªè¨¼ãƒ»èªå¯æ©Ÿèƒ½ã®è¿½åŠ 
- [ ] é…é€ç®¡ç†æ©Ÿèƒ½ã®å®Ÿè£…
- [ ] ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…
- [ ] ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã®æ”¹å–„
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¤œç´¢æ©Ÿèƒ½
- [ ] PostgreSQLå¯¾å¿œ
- [ ] Dockerã‚³ãƒ³ãƒ†ãƒŠåŒ–

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License
